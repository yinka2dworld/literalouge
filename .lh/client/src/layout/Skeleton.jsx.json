{
    "sourceFile": "client/src/layout/Skeleton.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1736570991807,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1736571113416,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import '../css/Skeleton.css';\r\n+import '../css/.css';\r\n \r\n const Skeleton = ({ count = 9 }) => {\r\n     return (\r\n         <div className=\"skeleton-grid\">\r\n"
                },
                {
                    "date": 1736572547077,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +0,0 @@\n-import '../css/.css';\r\n-\r\n-const Skeleton = ({ count = 9 }) => {\r\n-    return (\r\n-        <div className=\"skeleton-grid\">\r\n-            {Array.from({ length: count }).map((_, index) => (\r\n-                <div className=\"skeleton-card\" key={index}>\r\n-                    <div className=\"skeleton-image\"></div>\r\n-                    <div className=\"skeleton-text\"></div>\r\n-                    <div className=\"skeleton-text short\"></div>\r\n-                </div>\r\n-            ))}\r\n-        </div>\r\n-    );\r\n-};\r\n-\r\n-export default Skeleton;\r\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736572562349,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,1 @@\n-\n+y\n\\ No newline at end of file\n"
                },
                {
                    "date": 1736572765420,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,171 @@\n-y\n\\ No newline at end of file\n+import '../css/Book.css';\r\n+import { useParams, useNavigate, Link } from \"react-router-dom\";\r\n+import Navbar from '../layout/Navbar.jsx';\r\n+import Footer from '../layout/Footer.jsx';\r\n+import { useQuery, useMutation } from '@apollo/client';\r\n+import { BOOK } from '../graphql/queries.js';\r\n+import { DELETEBOOK } from '../graphql/mutations.js';\r\n+import { FaTrash, FaEdit } from 'react-icons/fa';\r\n+import { saveAs } from 'file-saver';\r\n+import VolunteerActivismIcon from '@mui/icons-material/VolunteerActivism';\r\n+import Skeleton from 'react-loading-skeleton';\r\n+import 'react-loading-skeleton/dist/skeleton.css';\r\n+\r\n+const Book = () => {\r\n+  const { bookId } = useParams();\r\n+  const navigate = useNavigate();\r\n+  const role = localStorage.getItem('role');\r\n+  const token = localStorage.getItem('token');\r\n+\r\n+  const { loading, error, data } = useQuery(BOOK, {\r\n+    variables: { bookId },\r\n+    context: {\r\n+      headers: {\r\n+        Authorization: `Bearer ${token}`,\r\n+      },\r\n+    },\r\n+  });\r\n+\r\n+  const book = data?.book;\r\n+\r\n+  const [deleteBook] = useMutation(DELETEBOOK);\r\n+\r\n+  const handleDelete = async () => {\r\n+    if (!bookId) {\r\n+      alert('Invalid book ID.');\r\n+      return;\r\n+    }\r\n+\r\n+    try {\r\n+      const { data } = await deleteBook({\r\n+        variables: { deleteBookId: bookId },\r\n+        context: {\r\n+          headers: {\r\n+            Authorization: `Bearer ${token}`,\r\n+          },\r\n+        },\r\n+      });\r\n+\r\n+      if (data?.deleteBook?.success) {\r\n+        alert('Book deleted successfully!');\r\n+        navigate('/home');\r\n+      } else {\r\n+        alert(data?.deleteBook?.message || 'Failed to delete the book.');\r\n+      }\r\n+    } catch (err) {\r\n+      console.error('Error deleting book:', err);\r\n+      alert('An error occurred while deleting the book. Please try again.');\r\n+    }\r\n+  };\r\n+\r\n+  const handleUpdate = () => {\r\n+    navigate(`/admin/updateBook/${bookId}`);\r\n+  };\r\n+\r\n+  const handleDownload = () => {\r\n+    const pdfUrl = book?.bookFile;\r\n+    const pdfName = `literalouge.com ${book?.bookName || 'book'}.pdf`;\r\n+\r\n+    if (!pdfUrl) {\r\n+      alert('File not available for download.');\r\n+      return;\r\n+    }\r\n+\r\n+    saveAs(pdfUrl, pdfName);\r\n+  };\r\n+\r\n+  if (loading) {\r\n+    return (\r\n+      <div className=\"loading-skeleton\">\r\n+        <Skeleton height={400} width=\"100%\" />\r\n+        <Skeleton count={3} height={20} width=\"80%\" style={{ margin: '10px auto' }} />\r\n+      </div>\r\n+    );\r\n+  }\r\n+\r\n+  if (error) return <p>Error: {error.message}</p>;\r\n+\r\n+  return (\r\n+    <div>\r\n+      <Navbar />\r\n+\r\n+      <div className=\"book-detail\">\r\n+        {book && (\r\n+          <>\r\n+            {/* Book Cover */}\r\n+            <img\r\n+              src={book.bookCover}\r\n+              alt={book.bookName}\r\n+              className=\"book-photo\"\r\n+            />\r\n+\r\n+            {/* Book Info */}\r\n+            <div className=\"book-info\">\r\n+              <h1 className=\"book-title\">{book.bookName}</h1>\r\n+              <p className=\"book-author\">by {book.bookAuthor}</p>\r\n+            </div>\r\n+\r\n+            {/* Donation Section */}\r\n+            <div className=\"donation-section\">\r\n+              <h3 className=\"donation-header\">We need your support!</h3>\r\n+              <Link className=\"donate-msg\" to=\"/donate\">\r\n+                <p>\r\n+                  Kindly click here to support us with a donation, helping us\r\n+                  continue providing free access to an exceptional collection of\r\n+                  African Literature. <VolunteerActivismIcon className=\"icon\" />\r\n+                </p>\r\n+              </Link>\r\n+            </div>\r\n+\r\n+            {/* Book Description */}\r\n+            <div className=\"book-description\">\r\n+              <h3>Description</h3>\r\n+              <p>{book.bookDescription}</p>\r\n+            </div>\r\n+\r\n+            {/* Book Meta Info */}\r\n+            <div className=\"book-meta\">\r\n+              <p>\r\n+                <strong>Category:</strong> {book.bookCategory}\r\n+              </p>\r\n+              <p>\r\n+                <strong>Language:</strong> {book.bookLanguage}\r\n+              </p>\r\n+            </div>\r\n+\r\n+            {/* Action Buttons */}\r\n+            <div className=\"buttons-div\">\r\n+              <button\r\n+                onClick={handleDownload}\r\n+                disabled={loading}\r\n+                className=\"book-link\"\r\n+              >\r\n+                Download\r\n+              </button>\r\n+\r\n+              {(role === 'admin' || role === 'superAdmin') && (\r\n+                <div className=\"admin-icons\">\r\n+                  <FaTrash\r\n+                    className=\"icon delete-icon\"\r\n+                    title=\"Delete Book\"\r\n+                    onClick={handleDelete}\r\n+                  />\r\n+                  <FaEdit\r\n+                    className=\"icon edit-icon\"\r\n+                    title=\"Update Book\"\r\n+                    onClick={handleUpdate}\r\n+                  />\r\n+                </div>\r\n+              )}\r\n+            </div>\r\n+          </>\r\n+        )}\r\n+      </div>\r\n+\r\n+      {/* Footer */}\r\n+      <Footer />\r\n+    </div>\r\n+  );\r\n+};\r\n+\r\n+export default Book;\r\n"
                }
            ],
            "date": 1736570991807,
            "name": "Commit-0",
            "content": "import '../css/Skeleton.css';\r\n\r\nconst Skeleton = ({ count = 9 }) => {\r\n    return (\r\n        <div className=\"skeleton-grid\">\r\n            {Array.from({ length: count }).map((_, index) => (\r\n                <div className=\"skeleton-card\" key={index}>\r\n                    <div className=\"skeleton-image\"></div>\r\n                    <div className=\"skeleton-text\"></div>\r\n                    <div className=\"skeleton-text short\"></div>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Skeleton;\r\n"
        }
    ]
}