{
    "sourceFile": "client/src/pages/Login.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1735999244748,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1735999352270,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n <button style={{'backgroundColor':'#070C70','marginTop':'15px', 'color':'#ff1493', borderColor:'#ff1493'}}>Forget password</button>\r\n </form>\r\n \r\n          <div className='acc' >\r\n-<p style={{'color':'#070C70'}}> Don't have an account?</p>  \r\n+<p style={{'color':'#070C70'}}></p>  \r\n <a href=\"/signup\" className='form-link'>Signup</a>\r\n </div>\r\n     </div>\r\n \r\n"
                },
                {
                    "date": 1735999359856,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n <button style={{'backgroundColor':'#070C70','marginTop':'15px', 'color':'#ff1493', borderColor:'#ff1493'}}>Forget password</button>\r\n </form>\r\n \r\n          <div className='acc' >\r\n-<p style={{'color':'#070C70'}}></p>  \r\n+<p style={{'color':'#070C70'}}>Don't have an account?</p>  \r\n <a href=\"/signup\" className='form-link'>Signup</a>\r\n </div>\r\n     </div>\r\n \r\n"
                }
            ],
            "date": 1735999244748,
            "name": "Commit-0",
            "content": "import '../css/Auth.css'\r\nimport { useState } from 'react';\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport libraryWay from '/assets/libraryWay.jpg';\r\nimport { LOGIN } from \"../graphql/mutations.js\"\r\nimport { useMutation } from '@apollo/client';\r\n\r\nconst Login = () => {\r\n  const myHistory = useNavigate()\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [ login, {loading, error }] = useMutation(LOGIN);\r\n \r\n  \r\n\r\nconst handleLogin = async (e) => {\r\n       e.preventDefault();\r\n try {\r\n      const { data } = await login({ variables: { loginuser: { username, password } } });\r\n       \r\n      localStorage.setItem('authToken', data.login.token);\r\n      localStorage.setItem('userId', data.login.userId);\r\n      localStorage.setItem('role', data.login.role)\r\n      const expiryDate = new Date(new Date().getTime() + 5 * 60 * 60 * 1000); // 5 hours from now\r\n      localStorage.setItem('expiryDate', expiryDate.toString());\r\n    myHistory('/home')\r\n    } catch (error) {\r\n      console.error('Login error:', error.message);\r\n    }\r\n }\r\n\r\n    return(\r\n<div className=\"login\"> \r\n<img className=\"LibraryWay\"  src={libraryWay} width={480} height={620} loading='lazy' alt={\"library way 1\"}/>\r\n\r\n    <div className=\"form\" >\r\n<h1 className='title'>Login</h1>\r\n{error && <p className='errorMsg'>Incorrect username or password</p>} \r\n{/* {login && <p className='successMsg'>Login successful</p>} */}\r\n<form action=\"/login\" method=\"post\"\r\nonSubmit={handleLogin}>\r\n\r\n<div style={{'marginBottom':'35px', paddingTop:'30px'}}>\r\n<label htmlFor=\"username\" style={{'color':'#070C70', 'fontSize':'25px'}}>Username</label><br/>\r\n<input type=\"username\" className='info' id=\"username\"\r\nvalue={username}   onChange={(e) => setUsername(e.target.value)}\r\n  required/> <br/>\r\n</div>\r\n\r\n<div style={{'marginTop':'35px', 'marginBottom':'35px'}}>\r\n<label htmlFor=\"password\" style={{'color':'#070C70', 'fontSize':'25px'}}>Password</label><br/>\r\n<input type=\"password\" className='info' id=\"password\"\r\nvalue={password}     onChange={(e) => setPassword(e.target.value)}\r\n  required/> <br/>\r\n</div>\r\n{!loading ? <button>Login Account</button> : <button disabled>Loading...</button>} \r\n<button style={{'backgroundColor':'#070C70','marginTop':'15px', 'color':'#ff1493', borderColor:'#ff1493'}}>Forget password</button>\r\n</form>\r\n\r\n         <div className='acc' >\r\n<p style={{'color':'#070C70'}}> Don't have an account?</p>  \r\n<a href=\"/signup\" className='form-link'>Signup</a>\r\n</div>\r\n    </div>\r\n\r\n</div>\r\n    )}\r\nexport default Login ;"
        }
    ]
}